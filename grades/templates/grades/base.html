{% load static %}
<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{% block title %}سامانه مدیریت نمرات{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css">
  <style>
    /* Modern theme */
    :root{
      --bg:#0f1724; /* deep navy */
      --surface:#0b1220; /* darker card */
      --muted:#9aa4b2;
      --accent-1: #7c3aed; /* purple */
      --accent-2: #06b6d4; /* teal */
      --glass: rgba(255,255,255,0.03);
      --card: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    }

    html,body{height:100%;}
    body { font-family: Vazirmatn, Tahoma, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue'; background: radial-gradient(1000px 400px at 10% 10%, rgba(124,58,237,0.06), transparent), var(--bg); color: #e6eef8; margin:0; }
    .container-main { max-width:1100px; margin:28px auto; padding:0 20px; }
    .panel { background:var(--surface); border-radius:14px; padding:20px; box-shadow: 0 6px 18px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03); }
    .hero { display:flex; justify-content:space-between; align-items:center; gap:12px; padding:18px; margin-bottom:14px; }
    .stat-badge { background: linear-gradient(90deg,var(--accent-1),#a78bfa); color:#fff; padding:8px 14px; border-radius:12px; font-weight:700; }
    .avg-badge { background: linear-gradient(90deg,var(--accent-2),#67e8f9); color:#021124; padding:6px 12px; border-radius:999px; font-weight:800; }

    /* Navbar */
    .navbar { background: transparent; padding:14px 0; }
    .navbar-brand { color: #e6eef8; text-decoration:none; }
    .navbar a.btn { transition: transform .12s ease, box-shadow .12s ease; }
    .navbar a.btn:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(124,58,237,0.25); }

    /* lists */
    .list-group-item { background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border:1px solid rgba(255,255,255,0.02); color:var(--muted); }
    .list-group-item .font-weight-700, .list-group-item div[style] { color: #e6eef8; }

    /* table */
    table { width:100%; border-collapse:collapse; color:#e6eef8; }
    th, td { padding:10px 8px; border-bottom:1px solid rgba(255,255,255,0.03); }
    th { color:var(--muted); font-weight:700; font-size:0.95rem; }

    /* buttons */
    .btn-primary { background: linear-gradient(90deg,var(--accent-1), #a78bfa); border: none; color: white; }
    .btn-outline-secondary { border:1px solid rgba(255,255,255,0.06); color:var(--muted); background:transparent; }
    .btn-sm { padding:6px 10px; }

    /* small helpers */
    .text-muted { color: var(--muted) !important; }
    .d-flex.gap-2 { gap:8px; }

    /* responsive tweaks */
    @media (max-width:760px){ .container-main{ padding: 12px; } .panel{padding:14px;} }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body>
  <nav class="navbar" style="background:transparent; padding:10px 0;">
    <div class="container container-main d-flex align-items-center">
  <a class="navbar-brand h4" href="{% url 'grades:dashboard' %}">الگوریتم</a>
  <button id="backBtn" class="btn btn-outline-secondary btn-sm ms-3" style="display:none;">بازگشت</button>
  <a id="homeBtn" class="btn btn-sm btn-primary ms-2" href="{% url 'grades:dashboard' %}">خانه</a>
      <div class="ms-auto d-flex align-items-center gap-2">
        {% if user.is_authenticated %}
          <div class="text-end me-3">
            <div style="font-weight:700">{{ user.get_full_name|default:user.username }}</div>
            <div class="text-muted small">کاربر وارد شده</div>
          </div>
          <form method="post" action="{% url 'grades:logout' %}" style="display:inline;">
            {% csrf_token %}
            <button class="btn btn-outline-secondary btn-sm" type="submit">خروج</button>
          </form>
        {% else %}
          {# login button removed as requested #}
        {% endif %}
      </div>
    </div>
  </nav>

  <main class="container-main">
    {% if messages %}
      {% for m in messages %}
        <div class="alert alert-{{ m.tags|default:'info' }} panel">{{ m }}</div>
      {% endfor %}
    {% endif %}

    {# hero banner removed as requested #}

    {% block content %}{% endblock %}

  <p class="text-muted text-center mt-4 small">zhiro@sharifi.top</p>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    (function(){
      const back = document.getElementById('backBtn');
      if (!back) return;
      function update(){
        try{ if (window.history.length>1) back.style.display='inline-block'; else back.style.display='none'; }
        catch(e){ back.style.display='none'; }
      }
      back.addEventListener('click', function(e){ e.preventDefault(); window.history.back(); });
      update();
      window.addEventListener('popstate', update);
    })();
  </script>
  {% block extra_js %}{% endblock %}
</body>
</html>
